<mat-sidenav-container class="sidenav-container">
    <mat-sidenav #drawer class="sidenav" fixedInViewport
        [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'"
        [mode]="(isHandset$ | async) ? 'over' : 'side'"
        [opened]="(isHandset$ | async) === false">

        <mat-toolbar class="sticky-item">
<!--            <img src="assets/images/logo.svg" alt="" height="150" width="150">-->
            Keep Us
        </mat-toolbar>

        <ng-container *ngIf="isLogged && authService.decodedToken">
            <mat-nav-list style="top: 64px;" class="sticky-item">

                <!-- User profile -->
                <a mat-list-item
                   routerLink="profile"
                   (click)="groupAction('Profile', 0); isMobile ? drawer.close() : null"
                   [ngClass]="{'active': selectedGroup === 'Profile'}">
                        <img src="assets/images/avatars/avatar-{{selectedAvatar}}.png" alt="Avatar" class="avatar icon-margin">
                        <span class="profile">{{authService.decodedToken.sub}}</span>
                </a>
                <mat-divider></mat-divider>

                <!-- Calendar -->
<!--                <a mat-list-item-->
<!--                   routerLink="calendar"-->
<!--                   (click)="groupAction('Calendar', 0); isMobile ? drawer.close() : null"-->
<!--                   [ngClass]="{'active': selectedGroup === 'Calendar'}">-->
<!--                    <mat-icon class="icon-margin">calendar_month</mat-icon>-->
<!--                    Calendar-->
<!--                </a>-->
<!--                <mat-divider></mat-divider>-->
            </mat-nav-list>

            <!-- Get user groups -->
            <mat-nav-list>
                <ng-container *ngFor="let group of groups">
                    <a mat-list-item
                       [ngClass]="{' active': selectedGroup === group.name}"
                       (click)="groupAction(group.name, group.id); isMobile ? drawer.close() : null">
                        {{group.name}}
                    </a>
                </ng-container>

            </mat-nav-list>

            <!-- Add new group -->
            <mat-nav-list class="bottom-btn" (click)="openAddModal(true); isMobile ? drawer.close() : null">
                <a mat-list-item>
                    <mat-icon class="icon-margin">add_circle</mat-icon>
                    New group
                </a>
            </mat-nav-list>
        </ng-container>
    </mat-sidenav>
    <mat-sidenav-content>
        <mat-toolbar color="primary" *ngIf="isLogged">
            <button
                type="button"
                aria-label="sidenav"
                mat-icon-button
                (click)="drawer.toggle()"
                *ngIf="isHandset$ | async">
                <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
            </button>

            <!-- Display name of group or page -->
            <span>{{ selectedGroup }}</span>

            <span class="spacer"></span>

            <!-- Display user actions based on rights -->
            <button mat-icon-button
                    [matMenuTriggerFor]="menu"
                    aria-label="Group menu"
                    *ngIf="!['Profile', 'Personal space', 'Calendar'].includes(selectedGroup)">
                <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
<!--                <button mat-menu-item (click)="openUserModal()">-->
<!--                    <mat-icon>group</mat-icon>-->
<!--                    <span>Users</span>-->
<!--                </button>-->
                <button mat-menu-item (click)="openAddModal(false)">
                    <mat-icon>group_add</mat-icon>
                    <span>Add users</span>
                </button>
<!--                <button mat-menu-item>-->
<!--                    <mat-icon>person_remove</mat-icon>-->
<!--                    <span>Quit group</span>-->
<!--                </button>-->
<!--                <button mat-menu-item>-->
<!--                    <mat-icon class="delete-color">highlight_off</mat-icon>-->
<!--                    <span class="delete-color">Delete Group</span>-->
<!--                </button>-->
            </mat-menu>
        </mat-toolbar>

        <!-- App content -->
        <div class="app-content">
            <router-outlet></router-outlet>
        </div>
        <app-footer></app-footer>

    </mat-sidenav-content>
</mat-sidenav-container>
